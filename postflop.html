<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Poker Pro - Postflop 3-Bet Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100dvh;
            width: 100vw;
            overflow: hidden;
            background-color: #070707;
            color: white;
            font-family: ui-sans-serif, system-ui, sans-serif;
        }

        .main-app {
            display: grid;
            grid-template-rows: 1fr auto 165px;
            height: 100dvh;
        }

        .table-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .btn-new-hand {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid #444;
            color: #fbbf24;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .stats-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            padding: 6px 12px;
            border-radius: 8px;
            font-family: monospace;
            text-align: right;
            min-width: 110px;
        }

        .stat-line {
            font-size: 10px;
            font-weight: 800;
            line-height: 1.2;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .stat-val {
            color: #fbbf24;
        }

        .stat-actual {
            color: #fff;
        }

        /* Estilo del overlay mejorado para que cubra y capture clics */
        #feedback-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            padding: 15px 30px;
            border-radius: 15px;
            font-weight: 900;
            font-size: 20px;
            text-transform: uppercase;
            display: none;
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            width: 80%;
            cursor: pointer;
        }

        .poker-table {
            width: 100%;
            height: 85%;
            max-width: 440px;
            background: radial-gradient(circle at center, #1e4d30 0%, #0a1f14 100%);
            border: 8px solid #3d2b1f;
            border-radius: 150px;
            position: relative;
            box-shadow: inset 0 0 60px rgba(0, 0, 0, 0.8);
            z-index: 1;
        }

        .dealer-button {
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            color: black;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 900;
            z-index: 70;
            border: 1px solid #999;
        }

        .pot-label {
            position: absolute;
            top: 32%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 800;
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
            z-index: 50;
        }

        .board-container {
            position: absolute;
            top: 48%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 4px;
            z-index: 40;
        }

        .card {
            width: 40px;
            height: 56px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 3px 4px;
            font-weight: 900;
            font-size: 17px;
            line-height: 1;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.4);
            color: white;
        }

        .card-suit {
            align-self: flex-end;
            font-size: 20px;
        }

        .spades {
            background-color: #1a1a1a;
        }

        .hearts {
            background-color: #e11d48;
        }

        .clubs {
            background-color: #166534;
        }

        .diamonds {
            background-color: #1e40af;
        }

        .card-back-group {
            display: flex;
            gap: -12px;
            position: absolute;
            top: -12px;
            z-index: 20;
        }

        .card-back {
            width: 28px;
            height: 40px;
            background: linear-gradient(135deg, #8b0000 0%, #4a0000 100%);
            border: 1.5px solid #c0c0c0;
            border-radius: 3px;
        }

        .player-pod {
            position: absolute;
            width: 85px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
            opacity: 0.3;
            filter: grayscale(1);
            transition: all 0.3s ease;
        }

        .avatar-frame {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: #151515;
            border: 2px solid #444;
            overflow: hidden;
            position: relative;
        }

        .name-plate {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #333;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 800;
            margin-top: -8px;
            z-index: 30;
            text-align: center;
            width: 75px;
        }

        .stack-val {
            font-size: 11px;
            font-weight: 800;
            color: #22c55e;
            margin-top: 2px;
        }

        .bet-chips {
            position: absolute;
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 60;
        }

        .action-tag {
            font-size: 9px;
            font-weight: 900;
            padding: 1px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            margin-bottom: 2px;
            color: white;
        }

        .chip-amount {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #fbbf24;
            color: white;
            padding: 1px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 900;
            min-width: 45px;
            text-align: center;
        }

        .v-seat-0 {
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
        }

        .v-seat-1 {
            bottom: 25%;
            left: -5px;
        }

        .v-seat-2 {
            top: 20%;
            left: -5px;
        }

        .v-seat-3 {
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .v-seat-4 {
            top: 20%;
            right: -5px;
        }

        .v-seat-5 {
            bottom: 25%;
            right: -5px;
        }

        .d-pos-0 {
            bottom: 18%;
            left: 62%;
        }

        .d-pos-1 {
            bottom: 42%;
            left: 20%;
        }

        .d-pos-2 {
            top: 38%;
            left: 20%;
        }

        .d-pos-3 {
            top: 12%;
            left: 40%;
        }

        .d-pos-4 {
            top: 38%;
            right: 20%;
        }

        .d-pos-5 {
            bottom: 42%;
            right: 20%;
        }

        .v-bet-0 {
            bottom: 22%;
            left: 50%;
            transform: translateX(-50%);
        }

        .v-bet-1 {
            bottom: 25%;
            left: 85px;
        }

        .v-bet-2 {
            top: 25%;
            left: 85px;
        }

        .v-bet-3 {
            top: 18%;
            left: 50%;
            transform: translateX(-50%);
        }

        .v-bet-4 {
            top: 25%;
            right: 85px;
        }

        .v-bet-5 {
            bottom: 35%;
            right: 85px;
        }

        .hero-hand {
            display: flex;
            gap: 2px;
            position: absolute;
            bottom: 35px;
            z-index: 50;
        }

        .active-player {
            opacity: 1 !important;
            filter: grayscale(0) !important;
        }

        .phase-selection {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding-bottom: 15px;
            background: #070707;
        }

        .btn-phase {
            background: #1a1a1a;
            border: 1px solid #333;
            color: #fbbf24;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            min-width: 100px;
        }

        .btn-phase.active {
            background: #fbbf24;
            color: #000;
        }

        .action-bar {
            background: #111;
            padding: 15px 12px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .main-btns {
            display: grid;
            gap: 8px;
        }

        .btn-p {
            height: 60px;
            border-radius: 12px;
            font-weight: 800;
            text-transform: uppercase;
            color: white;
            border: none;
            font-size: 12px;
        }

        .btn-f {
            background: #334155;
            border-bottom: 4px solid #1e293b;
        }

        .btn-c {
            background: #1d4ed8;
            border-bottom: 4px solid #1e3a8a;
        }

        .btn-a {
            background: #b91c1c;
            border-bottom: 4px solid #7f1d1d;
        }
    </style>
</head>

<body onclick="closeFeedback()">

    <div class="main-app">
        <div class="table-container">
            <div id="feedback-overlay"></div>
            <button class="btn-new-hand" onclick="generate3BetScenario()">NUEVA MANO</button>

            <div class="stats-panel">
                <div class="stat-line"><span>RECORD:</span> <span id="record-val" class="stat-val">0</span></div>
                <div class="stat-line"><span>ACTUAL:</span> <span id="actual-val" class="stat-actual">0</span></div>
            </div>

            <div class="poker-table">
                <div id="dealer-btn" class="dealer-button">D</div>
                <div id="pot-display" class="pot-label">POT: 24 BB</div>
                <div id="board" class="board-container"></div>

                <div id="pod-0" class="player-pod v-seat-0 active-player">
                    <div id="hero-cards" class="hero-hand"></div>
                    <div class="avatar-frame" style="border-color: #fbbf24;"><img src="https://i.pravatar.cc/150?u=hero"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">HERO</div>
                    <div class="stack-val" id="st-0">100 BB</div>
                </div>
                <div id="bet-0" class="bet-chips v-bet-0"></div>

                <div id="pod-1" class="player-pod v-seat-1">
                    <div class="card-back-group" id="cb-1"></div>
                    <div class="avatar-frame"><img src="https://i.pravatar.cc/150?u=1"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">UTG</div>
                    <div class="stack-val" id="st-1">100 BB</div>
                </div>
                <div id="bet-1" class="bet-chips v-bet-1"></div>
                <div id="pod-2" class="player-pod v-seat-2">
                    <div class="card-back-group" id="cb-2"></div>
                    <div class="avatar-frame"><img src="https://i.pravatar.cc/150?u=2"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">MP</div>
                    <div class="stack-val" id="st-2">100 BB</div>
                </div>
                <div id="bet-2" class="bet-chips v-bet-2"></div>
                <div id="pod-3" class="player-pod v-seat-3">
                    <div class="card-back-group" id="cb-3"></div>
                    <div class="avatar-frame"><img src="https://i.pravatar.cc/150?u=3"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">CO</div>
                    <div class="stack-val" id="st-3">100 BB</div>
                </div>
                <div id="bet-3" class="bet-chips v-bet-3"></div>
                <div id="pod-4" class="player-pod v-seat-4">
                    <div class="card-back-group" id="cb-4"></div>
                    <div class="avatar-frame"><img src="https://i.pravatar.cc/150?u=4"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">BU</div>
                    <div class="stack-val" id="st-4">100 BB</div>
                </div>
                <div id="bet-4" class="bet-chips v-bet-4"></div>
                <div id="pod-5" class="player-pod v-seat-5">
                    <div class="card-back-group" id="cb-5"></div>
                    <div class="avatar-frame"><img src="https://i.pravatar.cc/150?u=5"
                            class="w-full h-full object-cover"></div>
                    <div class="name-plate">SB</div>
                    <div class="stack-val" id="st-5">100 BB</div>
                </div>
                <div id="bet-5" class="bet-chips v-bet-5"></div>
            </div>
        </div>

        <div class="phase-selection">
            <button class="btn-phase" onclick="window.location.href='index.html'">PREFLOP</button>
            <button class="btn-phase active">POSTFLOP</button>
        </div>

        <div class="action-bar">
            <div id="action-btns-container" class="main-btns"></div>
        </div>
    </div>

    <script>
        // HERO BET -> VILLANO RAISE
        const ESCENARIOS_DATABASE = [
            { board: [{ v: 'K', s: 'diamonds', i: '♦' }, { v: '7', s: 'diamonds', i: '♦' }, { v: '2', s: 'spades', i: '♠' }], hand: { v1: 'A', v2: 'Q', s1: 'diamonds', s2: 'diamonds', i1: '♦', i2: '♦' }, heroPos: 'CO', villanoPos: 'SB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 8, betVillano: 28, correct: 'CALL', msg: 'Flop: Nut Flush Draw - Call al Raise.' },
            { board: [{ v: 'J', s: 'hearts', i: '♥' }, { v: '9', s: 'clubs', i: '♣' }, { v: '5', s: 'spades', i: '♠' }, { v: '8', s: 'hearts', i: '♥' }], hand: { v1: 'Q', v2: '10', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'BU', villanoPos: 'BB', pot: 52, heroStack: 100, villanoStack: 100, betHero: 20, betVillano: 74, correct: 'ALLIN', msg: 'Turn: Escalera Nuts - All-in.' },
            { board: [{ v: 'A', s: 'spades', i: '♠' }, { v: 'K', s: 'hearts', i: '♥' }, { v: 'Q', s: 'clubs', i: '♣' }, { v: '2', s: 'diamonds', i: '♦' }, { v: '5', s: 'spades', i: '♠' }], hand: { v1: 'J', v2: '10', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'MP', villanoPos: 'UTG', pot: 64.5, heroStack: 100, villanoStack: 100, betHero: 6.5, betVillano: 70, correct: 'ALLIN', msg: 'BET PEQUEÑO RIVER INCENTIVA RAISE' },
            { board: [{ v: 'A', s: 'clubs', i: '♣' }, { v: '8', s: 'clubs', i: '♣' }, { v: '3', s: 'hearts', i: '♥' }], hand: { v1: 'K', v2: 'Q', s1: 'clubs', s2: 'clubs', i1: '♣', i2: '♣' }, heroPos: 'CO', villanoPos: 'SB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 8, betVillano: 26, correct: 'CALL', msg: 'Flop: Nut FD - Pagamos para ver Turn.' },
            { board: [{ v: '9', s: 'diamonds', i: '♦' }, { v: '8', s: 'spades', i: '♠' }, { v: '4', s: 'clubs', i: '♣' }, { v: '7', s: 'diamonds', i: '♦' }], hand: { v1: 'J', v2: 'T', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'BU', villanoPos: 'BB', pot: 52, heroStack: 100, villanoStack: 100, betHero: 26, betVillano: 78, correct: 'ALLIN', msg: 'Turn: Escalera Nuts - All-in.' },
            { board: [{ v: 'Q', s: 'hearts', i: '♥' }, { v: 'J', s: 'clubs', i: '♣' }, { v: '10', s: 'spades', i: '♠' }, { v: '4', s: 'diamonds', i: '♦' }, { v: '2', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: 'K', s1: 'spades', s2: 'diamonds', i1: '♠', i2: '♦' }, heroPos: 'MP', villanoPos: 'UTG', pot: 52, heroStack: 100, villanoStack: 100, betHero: 5, betVillano: 74, correct: 'ALLIN', msg: 'River: Escalera facil CALL' },
            { board: [{ v: 'J', s: 'spades', i: '♠' }, { v: '6', s: 'spades', i: '♠' }, { v: '2', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: '4', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'BU', villanoPos: 'SB', pot: 6, heroStack: 100, villanoStack: 100, betHero: 3, betVillano: 11, correct: 'CALL', msg: 'Flop: Nut FD - PROYECTO COLOR' },
            { board: [{ v: 'J', s: 'diamonds', i: '♦' }, { v: '5', s: 'clubs', i: '♣' }, { v: '2', s: 'spades', i: '♠' }], hand: { v1: 'A', v2: 'J', s1: 'clubs', s2: 'clubs', i1: '♣', i2: '♣' }, heroPos: 'CO', villanoPos: 'MP', pot: 24, heroStack: 100, villanoStack: 100, betHero: 8, betVillano: 32, correct: 'FOLD', msg: 'Flop: TPTK no aguanta un Raise x4 en seco.' },
            { board: [{ v: '9', s: 'hearts', i: '♥' }, { v: '4', s: 'spades', i: '♠' }, { v: '2', s: 'diamonds', i: '♦' }], hand: { v1: 'Q', v2: 'Q', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'MP', villanoPos: 'UTG', pot: 24, heroStack: 100, villanoStack: 100, betHero: 10, betVillano: 30, correct: 'CALL', msg: 'PAGAMOS UNA PERO CUIDADO PUEDE LLEVAR SET O DOBLES' },
            { board: [{ v: 'K', s: 'spades', i: '♠' }, { v: '7', s: 'hearts', i: '♥' }, { v: '5', s: 'clubs', i: '♣' }, { v: '2', s: 'diamonds', i: '♦' }], hand: { v1: 'A', v2: 'K', s1: 'diamonds', s2: 'hearts', i1: '♦', i2: '♥' }, heroPos: 'BU', villanoPos: 'BB', pot: 52, heroStack: 100, villanoStack: 100, betHero: 20, betVillano: 80, correct: 'FOLD', msg: 'HAY QUE SABER SOLTAR ESTAS MANOS CASI SIEMPRE LLEVA SET' },
            { board: [{ v: 'Q', s: 'spades', i: '♠' }, { v: 'J', s: 'hearts', i: '♥' }, { v: '4', s: 'clubs', i: '♣' }], hand: { v1: 'Q', v2: 'J', s1: 'clubs', s2: 'clubs', i1: '♣', i2: '♣' }, heroPos: 'CO', villanoPos: 'SB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 12, betVillano: 36, correct: 'ALLIN', msg: 'Flop: DOBLE PAREJA - AUN PUEDE TENER MANOS COMO AA KK AQ KQ.' },
            { board: [{ v: 'Q', s: 'spades', i: '♠' }, { v: 'J', s: 'hearts', i: '♥' }, { v: '5', s: 'clubs', i: '♣' }], hand: { v1: 'A', v2: 'Q', s1: 'clubs', s2: 'clubs', i1: '♣', i2: '♣' }, heroPos: 'BU', villanoPos: 'BB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 12, betVillano: 36, correct: 'FOLD', msg: 'FOLD PUEDE TENER MANOS COMO AA - KK - QQ - JJ -55 - DOBLES' },
            { board: [{ v: '8', s: 'hearts', i: '♥' }, { v: '7', s: 'clubs', i: '♣' }, { v: '3', s: 'spades', i: '♠' }], hand: { v1: '8', v2: '8', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'BU', villanoPos: 'BB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 8, betVillano: 24, correct: 'CALL', msg: 'Flop: Set - Atrapamos en board seco.' },
            { board: [{ v: 'A', s: 'diamonds', i: '♦' }, { v: 'K', s: 'spades', i: '♠' }, { v: '6', s: 'hearts', i: '♥' }, { v: '4', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: 'K', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'MP', villanoPos: 'UTG', pot: 60, heroStack: 100, villanoStack: 100, betHero: 25, betVillano: 75, correct: 'FOLD', msg: 'HAY QUE JUGAR MUY NIT VS RAISE' },
            { board: [{ v: '10', s: 'hearts', i: '♥' }, { v: '6', s: 'spades', i: '♠' }, { v: '2', s: 'clubs', i: '♣' }, { v: 'Q', s: 'diamonds', i: '♦' }, { v: '5', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: '10', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'BU', villanoPos: 'CO', pot: 100, heroStack: 100, villanoStack: 80, betHero: 30, betVillano: 80, correct: 'FOLD', msg: 'HAY QUE SABER SOLTAR ESTAS MANOS, SIEMPRE LLEVAN SET O DOBLES' },
            { board: [{ v: '9', s: 'diamonds', i: '♦' }, { v: '7', s: 'hearts', i: '♥' }, { v: '2', s: 'spades', i: '♠' }, { v: 'K', s: 'clubs', i: '♣' }, { v: 'A', s: 'spades', i: '♠' }], hand: { v1: 'J', v2: 'J', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'UTG', villanoPos: 'MP', pot: 52, heroStack: 100, villanoStack: 100, betHero: 25, betVillano: 75, correct: 'FOLD', msg: 'River: Dos Overcards en mesa - Fold fácil.' },
            { board: [{ v: 'K', s: 'hearts', i: '♥' }, { v: '10', s: 'hearts', i: '♥' }, { v: '4', s: 'spades', i: '♠' }, { v: '2', s: 'clubs', i: '♣' }, { v: '7', s: 'diamonds', i: '♦' }], hand: { v1: 'A', v2: 'Q', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'BU', villanoPos: 'BB', pot: 52, heroStack: 100, villanoStack: 100, betHero: 35, betVillano: 75, correct: 'FOLD', msg: 'River: Proyecto de color fallido - No pagar All-in.' },
            { board: [{ v: '8', s: 'clubs', i: '♣' }, { v: '5', s: 'diamonds', i: '♦' }, { v: '4', s: 'hearts', i: '♥' }, { v: 'K', s: 'spades', i: '♠' }], hand: { v1: '7', v2: '6', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'CO', villanoPos: 'SB', pot: 14, heroStack: 100, villanoStack: 100, betHero: 12, betVillano: 30, correct: 'CALL', msg: 'TENEMOS NUTS HAY QUE DEJARLO BLUFEAR.' },
            { board: [{ v: 'A', s: 'clubs', i: '♣' }, { v: 'Q', s: 'diamonds', i: '♦' }, { v: 'J', s: 'hearts', i: '♥' }], hand: { v1: 'K', v2: '10', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'UTG', villanoPos: 'BB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 12, betVillano: 36, correct: 'CALL', msg: 'Flop: Escalera Nuts - dejarlo blufear.' },
            { board: [{ v: '9', s: 'diamonds', i: '♦' }, { v: '10', s: 'diamonds', i: '♦' }, { v: '2', s: 'spades', i: '♠' }], hand: { v1: 'Q', v2: 'J', s1: 'diamonds', s2: 'diamonds', i1: '♦', i2: '♦' }, heroPos: 'MP', villanoPos: 'SB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 12, betVillano: 36, correct: 'CALL', msg: 'Flop: Super Combo Draw - Pagamos Raise.' },
            { board: [{ v: '4', s: 'hearts', i: '♥' }, { v: '4', s: 'clubs', i: '♣' }, { v: '2', s: 'spades', i: '♠' }, { v: '10', s: 'diamonds', i: '♦' }, { v: 'Q', s: 'spades', i: '♠' }], hand: { v1: 'A', v2: 'A', s1: 'diamonds', s2: 'hearts', i1: '♦', i2: '♥' }, heroPos: 'BU', villanoPos: 'BB', pot: 38, heroStack: 100, villanoStack: 100, betHero: 10, betVillano: 80, correct: 'FOLD', msg: 'HAY QUE JUGAR MUY NIT VS RAISE' },
            { board: [{ v: 'A', s: 'hearts', i: '♥' }, { v: '6', s: 'diamonds', i: '♦' }, { v: '10', s: 'hearts', i: '♥' }, { v: '2', s: 'clubs', i: '♣' }], hand: { v1: 'A', v2: '10', s1: 'diamonds', s2: 'diamonds', i1: '♦', i2: '♦' }, heroPos: 'BB', villanoPos: 'MP', pot: 40, heroStack: 100, villanoStack: 100, betHero: 20, betVillano: 80, correct: 'FOLD', msg: 'TENEMOS DOBLES PERO ANTE UN PUSH NO PODEMOS PAGAR LLEVA SET ' },
            { board: [{ v: 'Q', s: 'hearts', i: '♥' }, { v: '5', s: 'hearts', i: '♥' }, { v: '3', s: 'hearts', i: '♥' }], hand: { v1: 'T', v2: '9', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'MP', villanoPos: 'SB', pot: 9.5, heroStack: 100, villanoStack: 100, betHero: 1, betVillano: 95, correct: 'FOLD', msg: 'LLEVAMOS COLOR MEDIO Y FALTA COLOR AL AS Y SU PUSH ES MUY FUERTE FOLDEAMOS' },
            { board: [{ v: 'K', s: 'diamonds', i: '♦' }, { v: '3', s: 'clubs', i: '♣' }, { v: 'Q', s: 'diamonds', i: '♦' }, { v: '7', s: 'clubs', i: '♣' }, { v: '10', s: 'spades', i: '♠' }], hand: { v1: 'J', v2: '9', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'CO', villanoPos: 'SB', pot: 11, heroStack: 100, villanoStack: 100, betHero: 5, betVillano: 89, correct: 'FOLD', msg: 'SI BIEN TENEMOS ESCALA ES "LA ESCALA DEL TONTO", SI NOS PUSHEAN LLEVAN LA ESCALA BIEN ARRIBA ' },
            { board: [{ v: '4', s: 'hearts', i: '♥' }, { v: 'A', s: 'clubs', i: '♣' }, { v: '9', s: 'hearts', i: '♥' }, { v: '8', s: 'spades', i: '♠' }, { v: '7', s: 'clubs', i: '♣' }], hand: { v1: 'A', v2: '9', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'BU', villanoPos: 'CO', pot: 44.5, heroStack: 100, villanoStack: 100, betHero: 23, betVillano: 78, correct: 'FOLD', msg: 'TENEMOS DOBLES Y NOS PUSHEAN HAY QUE FOLDEAR ESTAS MANOS, ' },
            { board: [{v:'10',s:'hearts',i:'♥'},{v:'Q',s:'clubs',i:'♣'},{v:'A',s:'clubs',i:'♣'}], hand: {v1:'Q',v2:'Q',s1:'spades',s2:'hearts',i1:'♠',i2:'♥'}, heroPos:'UTG', villanoPos:'MP', pot:8.5, heroStack:100, villanoStack:100, betHero:4.5, betVillano:22, correct:'RAISE', msg:' Tienes set de damas en un board muy coordinado. Ante el raise del villano en el Flop, debemos resubir para proteger nuestra mano frente a proyectos de color o escalera y empezar a construir el bote.' }
        ];

        // HERO CHECK -> BET
        const DATABASE_CHECK_BET = [
            { board: [{ v: '8', s: 'diamonds', i: '♦' }, { v: '5', s: 'clubs', i: '♣' }, { v: '2', s: 'spades', i: '♠' }], hand: { v1: 'J', v2: 'J', s1: 'hearts', s2: 'spades', i1: '♥', i2: '♠' }, heroPos: 'UTG', villanoPos: 'MP', pot: 24, heroStack: 100, villanoStack: 100, betHero: 0, betVillano: 12, correct: 'CALL', msg: 'Check-Call: Overpair en board seco, pagamos para controlar pot. PERO CUIDADO SI MANDA OTRO TORTAZO' },
            { board: [{ v: '9', s: 'hearts', i: '♥' }, { v: '10', s: 'hearts', i: '♥' }, { v: 'J', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: 'K', s1: 'spades', s2: 'clubs', i1: '♠', i2: '♣' }, heroPos: 'CO', villanoPos: 'BU', pot: 24, heroStack: 100, villanoStack: 100, betHero: 0, betVillano: 18, correct: 'FOLD', msg: 'Check-Fold: Board desastroso para AK, nos rendimos.' },
            { board: [{ v: '7', s: 'hearts', i: '♥' }, { v: '4', s: 'diamonds', i: '♦' }, { v: '2', s: 'clubs', i: '♣' }], hand: { v1: '7', v2: '7', s1: 'spades', s2: 'clubs', i1: '♠', i2: '♣' }, heroPos: 'SB', villanoPos: 'BB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 0, betVillano: 16, correct: 'CALL', msg: 'BETEA MUY FUERTE TIENE MANO, HAY QUE DEJAR QUE FAROLEE' },
            { board: [{ v: '8', s: 'hearts', i: '♥' }, { v: '3', s: 'diamonds', i: '♦' }, { v: '7', s: 'hearts', i: '♥' }, { v: '6', s: 'hearts', i: '♥' }, { v: '9', s: 'diamonds', i: '♦' }], hand: { v1: 'A', v2: 'A', s1: 'diamonds', s2: 'clubs', i1: '♦', i2: '♣' }, heroPos: 'SB', villanoPos: 'BU', pot: 78, heroStack: 100, villanoStack: 100, betHero: 0, betVillano: 61.5, correct: 'FOLD', msg: 'HAY ESCALA Y COLOR ABIERTO Y PUEDE TENER SET TAMBIEN O DOBLES' },
            { board: [{v:'4',s:'spades',i:'♠'},{v:'A',s:'hearts',i:'♥'},{v:'Q',s:'clubs',i:'♣'},{v:'6',s:'diamonds',i:'♦'}], hand: {v1:'4',v2:'6',s1:'clubs',s2:'clubs',i1:'♣',i2:'♣'}, heroPos:'BB', villanoPos:'BU', pot:17.60, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:5.20, correct:'CALL', msg:'¡Doble pareja en el Turn! El villano (Poker sta705) lanza una apuesta de continuación de 5.20 BB. Aunque nuestra mano es fuerte, el board tiene cartas altas peligrosas como el As y la Dama, por lo que pagar es la opción más prudente para controlar el tamaño del bote y ver el River.' },
            { board: [{v:'10',s:'clubs',i:'♣'},{v:'5',s:'clubs',i:'♣'},{v:'10',s:'spades',i:'♠'}], hand: {v1:'K',v2:'10',s1:'hearts',s2:'diamonds',i1:'♥',i2:'♦'}, heroPos:'BB', villanoPos:'BU', pot:9.40, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:3.80, correct:'RAISE', msg:'¡Trío de Dieces! Con el K de kicker y un board que presenta proyecto de color, no podemos limitarnos a pagar. Hacemos un Raise para proteger nuestra mano y empezar a extraer valor de dieces peores, cincos o proyectos de trébol.' }
        ];

        // VILLANO BET -> HERO ? (betHero: 'NONE')
        const DATABASE_VILLAIN_LEAD = [
            { board: [{ v: 'Q', s: 'diamonds', i: '♦' }, { v: '7', s: 'spades', i: '♠' }, { v: '2', s: 'hearts', i: '♥' }], hand: { v1: 'A', v2: 'Q', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'BU', villanoPos: 'SB', pot: 24, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 8, correct: 'CALL', msg: 'Villano apuesta de primero. Tenemos Top Pair, pagamos para controlar.' },
            { board: [{ v: '10', s: 'hearts', i: '♥' }, { v: '9', s: 'hearts', i: '♥' }, { v: '8', s: 'hearts', i: '♥' }], hand: { v1: '2', v2: '2', s1: 'spades', s2: 'diamonds', i1: '♠', i2: '♦' }, heroPos: 'BB', villanoPos: 'UTG', pot: 4.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 3, correct: 'FOLD', msg: 'Villano apuesta fuerte en board conectado. Fold fácil.' },
            { board: [{ v: 'K', s: 'spades', i: '♠' }, { v: 'K', s: 'hearts', i: '♥' }, { v: '4', s: 'clubs', i: '♣' }], hand: { v1: 'K', v2: 'Q', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'BU', villanoPos: 'MP', pot: 24, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 12, correct: 'CALL', msg: 'TRAP: Villano apuesta en nuestro Trips. Solo pagamos para que siga blfeando.' },
            { board: [{ v: '2', s: 'diamonds', i: '♦' }, { v: 'K', s: 'diamonds', i: '♦' }, { v: '10', s: 'clubs', i: '♣' }, { v: 'Q', s: 'hearts', i: '♥' }], hand: { v1: 'Q', v2: 'Q', s1: 'spades', s2: 'diamonds', i1: '♠', i2: '♦' }, heroPos: 'CO', villanoPos: 'UTG', pot: 33.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 33.5, correct: 'ALLIN', msg: 'TENEMOS UNA MANO MUY FUERTE, SI BIEN HAY ESCALA YA COMPLETA, CON ESTA MANO VAMOS POR TODO' },
            { board: [{ v: 'A', s: 'hearts', i: '♥' }, { v: '6', s: 'diamonds', i: '♦' }, { v: '10', s: 'hearts', i: '♥' }, { v: '2', s: 'clubs', i: '♣' }], hand: { v1: 'A', v2: '10', s1: 'diamonds', s2: 'diamonds', i1: '♦', i2: '♦' }, heroPos: 'BB', villanoPos: 'MP', pot: 11.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 9, correct: 'RAISE', msg: 'TENEMOS UNA MANO MUY FUERTE, PERO SI NOS RAISEAN O VAN ALL IN SOLO TENEMOS DOS PARES. PERDEMOS CON SET' },
            { board: [{ v: 'J', s: 'diamonds', i: '♦' }, { v: '6', s: 'hearts', i: '♥' }, { v: '5', s: 'clubs', i: '♣' }, { v: '6', s: 'spades', i: '♠' }, { v: 'T', s: 'diamonds', i: '♦' }], hand: { v1: 'K', v2: 'K', s1: 'diamonds', s2: 'clubs', i1: '♦', i2: '♣' }, heroPos: 'BU', villanoPos: 'CO', pot: 81.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 41, correct: 'FOLD', msg: 'BETEA MUY FUERTE EL RIVER, HAY QUE SABER FOLDEAR ESTAS MANOS SON LAS QUE NOS SUBEN EL WINRATE SI FOLDEAMOS' },
            { board: [{ v: 'A', s: 'hearts', i: '♥' }, { v: '10', s: 'spades', i: '♠' }, { v: '9', s: 'spades', i: '♠' }, { v: 'J', s: 'clubs', i: '♣' }, { v: 'K', s: 'clubs', i: '♣' }], hand: { v1: 'K', v2: 'Q', s1: 'diamonds', s2: 'hearts', i1: '♦', i2: '♥' }, heroPos: 'BU', villanoPos: 'MP', pot: 68.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 76.5, correct: 'ALLIN', msg: '¡ESCALERA AL REY! Pagamos el All-in del villano para llevarnos el bote de 219.5 CG.' },
            { board: [{v:'10',s:'spades',i:'♠'},{v:'3',s:'hearts',i:'♥'},{v:'2',s:'diamonds',i:'♦'},{v:'J',s:'clubs',i:'♣'}], hand: {v1:'J',v2:'J',s1:'clubs',s2:'hearts',i1:'♣',i2:'♥'}, heroPos:'BU', villanoPos:'CO', pot:40.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:13.5, correct:'CALL', msg:'¡SET DE JOTAS! El villano apuesta en el Turn tras completarse la J. Solo pagamos para mantener sus faroles y proteger el pozo.' },
            { board: [{v:'8',s:'diamonds',i:'♦'},{v:'4',s:'clubs',i:'♣'},{v:'10',s:'clubs',i:'♣'},{v:'3',s:'hearts',i:'♥'}], hand: {v1:'10',v2:'10',s1:'spades',s2:'hearts',i1:'♠',i2:'♥'}, heroPos:'MP', villanoPos:'CO', pot:56.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:19, correct:'CALL', msg:' Tenemos el set máximo en el Turn. El villano apuesta fuerte desde su posición de MP; solo igualamos para mantener sus faroles en el River y proteger el bote.' },
            { board: [{v:'Q',s:'diamonds',i:'♦'},{v:'4',s:'hearts',i:'♥'},{v:'J',s:'clubs',i:'♣'}], hand: {v1:'Q',v2:'Q',s1:'clubs',s2:'hearts',i1:'♣',i2:'♥'}, heroPos:'BU', villanoPos:'BB', pot:26.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:9, correct:'CALL', msg:'Tenemos el set máximo. Solo igualamos la apuesta del villano en el Flop para esconder la fuerza de nuestra mano y dejar que siga faroleando en calles posteriores.' },
            { board: [{v:'2',s:'diamonds',i:'♦'},{v:'5',s:'hearts',i:'♥'},{v:'J',s:'spades',i:'♠'},{v:'5',s:'diamonds',i:'♦'}], hand: {v1:'J',v2:'J',s1:'clubs',s2:'hearts',i1:'♣',i2:'♥'}, heroPos:'BU', villanoPos:'SB', pot:25, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:8.5, correct:'RAISE', msg:'Tenemos Full House de Jotas y Cincos en el Turn. Ante la apuesta del villano en una mesa doblada, subimos para proteger nuestra mano y construir un bote mayor antes del River.' },
            { board: [{v:'A',s:'hearts',i:'♥'},{v:'9',s:'spades',i:'♠'},{v:'8',s:'diamonds',i:'♦'},{v:'3',s:'clubs',i:'♣'}], hand: {v1:'9',v2:'9',s1:'diamonds',s2:'clubs',i1:'♦',i2:'♣'}, heroPos:'BB', villanoPos:'SB', pot:30, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:10, correct:'CALL', msg:'¡CORRECTO! Tienes set de Nueves. El villano (SB) apuesta 10 CG en el Turn; solo pagamos para no asustarlo y extraer más valor en el River.' },
            { board: [{v:'2',s:'diamonds',i:'♦'},{v:'7',s:'clubs',i:'♣'},{v:'4',s:'clubs',i:'♣'}], hand: {v1:'A',v2:'A',s1:'spades',s2:'hearts',i1:'♠',i2:'♥'}, heroPos:'BB', villanoPos:'SB', pot:51, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:25.5, correct:'ALLIN', msg:'¡Tienes la mejor mano! Tras el bet del villano en el Flop en un bote ya grande y con proyectos de color fuera, el All-in presiona al máximo a sus manos medias y protege tu ventaja.' },
            { board: [{v:'A',s:'hearts',i:'♥'},{v:'7',s:'hearts',i:'♥'},{v:'9',s:'diamonds',i:'♦'}], hand: {v1:'7',v2:'7',s1:'spades',s2:'diamonds',i1:'♠',i2:'♦'}, heroPos:'BB', villanoPos:'BU', pot:13.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:7, correct:'RAISE', msg:'¡Set de Sietes! El villano apuesta fuerte en un board con proyecto de color. Hacemos un Raise para proteger nuestra mano y empezar a construir el bote contra sus Ases o proyectos antes de que el Turn complique la mesa.' },
            { board: [{v:'9',s:'spades',i:'♠'},{v:'4',s:'hearts',i:'♥'},{v:'8',s:'spades',i:'♠'},{v:'5',s:'diamonds',i:'♦'}], hand: {v1:'7',v2:'6',s1:'diamonds',s2:'hearts',i1:'♦',i2:'♥'}, heroPos:'BU', villanoPos:'BB', pot:29, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:17, correct:'ALLIN' },
            { board: [{v:'9',s:'hearts',i:'♥'},{v:'2',s:'clubs',i:'♣'},{v:'K',s:'diamonds',i:'♦'},{v:'10',s:'clubs',i:'♣'}], hand: {v1:'K',v2:'10',s1:'spades',s2:'spades',i1:'♠',i2:'♠'}, heroPos:'CO', villanoPos:'SB', pot:30, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:10, correct:'CALL', msg:'¡Buen ojo! Aunque tenemos dobles parejas máximas, el 10 completa la escalera con QJ. Solo pagamos la apuesta del villano para ver qué pasa en el River sin arriesgar todo el stack contra una mano superior.' },
            { board: [{v:'K',s:'spades',i:'♠'},{v:'6',s:'clubs',i:'♣'},{v:'9',s:'hearts',i:'♥'},{v:'2',s:'clubs',i:'♣'}], hand: {v1:'9',v2:'9',s1:'diamonds',s2:'spades',i1:'♦',i2:'♠'}, heroPos:'BB', villanoPos:'CO', pot:15.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:10, correct:'RAISE', msg:'¡Set de Nueves! El villano apuesta 10 en el Turn en un board seco. Aquí elegimos el Raise para empezar a construir el bote y extraer valor de sus Reyes o proyectos de trébol antes de que el River pueda complicar la acción.' },
            { board: [{v:'5',s:'clubs',i:'♣'},{v:'J',s:'spades',i:'♠'},{v:'10',s:'diamonds',i:'♦'},{v:'6',s:'spades',i:'♠'}], hand: {v1:'10',v2:'10',s1:'clubs',s2:'hearts',i1:'♣',i2:'♥'}, heroPos:'CO', villanoPos:'SB', pot:39, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:29.5, correct:'ALLIN', msg:'¡Tienes el set máximo! Aunque el 6 abre proyectos de escalera, tu mano es demasiado fuerte para solo pagar. Vamos All-in para proteger contra picas o escaleras y sacar todo el valor a sus Jacks o proyectos caros Y AA KK QQ AJ KQ 55' },
            { board: [{v:'A',s:'hearts',i:'♥'},{v:'9',s:'spades',i:'♠'},{v:'8',s:'diamonds',i:'♦'},{v:'3',s:'clubs',i:'♣'}], hand: {v1:'9',v2:'9',s1:'diamonds',s2:'clubs',i1:'♦',i2:'♣'}, heroPos:'BB', villanoPos:'SB', pot:30, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:10, correct:'CALL', msg:'¡Llevamos set de Nueves! El villano lanza su segunda apuesta en el Turn tras el As del flop. Solo pagamos para mantener sus faroles y raise NO queremos que siga metiendo mas fichas para un ALL NATURAL EN EL RIVER EN UN POZO GRANDE' },
            { board: [{v:'6',s:'hearts',i:'♥'},{v:'2',s:'spades',i:'♠'},{v:'A',s:'hearts',i:'♥'}], hand: {v1:'6',v2:'6',s1:'diamonds',s2:'clubs',i1:'♦',i2:'♣'}, heroPos:'BU', villanoPos:'SB', pot:21, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:8.5, correct:'RAISE', msg:'¡Set de Seises! El villano lanza una apuesta de continuación en un board que tiene dos corazones. Hacemos un Raise para cobrarle a sus Ases y proteger nuestra mano frente a posibles proyectos de color antes de que el Turn complique la acción.' },
            { board: [{v:'9',s:'spades',i:'♠'},{v:'4',s:'hearts',i:'♥'},{v:'8',s:'spades',i:'♠'},{v:'5',s:'diamonds',i:'♦'}], hand: {v1:'7',v2:'6',s1:'diamonds',s2:'hearts',i1:'♦',i2:'♥'}, heroPos:'BU', villanoPos:'BB', pot:29, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:17, correct:'ALLIN', msg:'¡Tienes la escalera! Aunque el villano resube fuerte en el Turn, con las nuts actuales y un board que tiene proyecto de color de picas, el All-in es el movimiento necesario para extraer el máximo valor de sus manos fuertes como el set de 5s.' },
            { board: [{v:'A',s:'hearts',i:'♥'},{v:'7',s:'hearts',i:'♥'},{v:'9',s:'diamonds',i:'♦'}], hand: {v1:'7',v2:'7',s1:'spades',s2:'diamonds',i1:'♠',i2:'♦'}, heroPos:'CO', villanoPos:'UTG', pot:13.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:7, correct:'RAISE', msg:'¡Set de Sietes! El villano apuesta fuerte en un flop con proyecto de color. Aplicamos un Raise para proteger nuestra mano y empezar a construir el bote contra sus Ases o proyectos antes de que una carta peligrosa en el Turn pueda frenar la acción.' },
            { board: [{v:'A',s:'diamonds',i:'♦'},{v:'8',s:'spades',i:'♠'},{v:'K',s:'clubs',i:'♣'},{v:'J',s:'diamonds',i:'♦'}], hand: {v1:'K',v2:'J',s1:'hearts',s2:'diamonds',i1:'♥',i2:'♦'}, heroPos:'SB', villanoPos:'CO', pot:11.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:6, correct:'CALL', msg:'¡Doble pareja en el Turn! Aunque nuestra mano ha mejorado mucho, el board ahora presenta proyectos de escalera y color, además de que el As sigue siendo una carta peligrosa. Pagamos para controlar el tamaño del bote y reevaluar en el River.' },
            


        ];

        // VILLANO CHECK -> HERO DECIDE (CHECK, BET, ALL-IN)
        const DATABASE_VILLAIN_CHECK = [
            { board: [{ v: 'Q', s: 'hearts', i: '♥' }, { v: 'A', s: 'diamonds', i: '♦' }, { v: '10', s: 'diamonds', i: '♦' }, { v: '4', s: 'diamonds', i: '♦' }], hand: { v1: 'K', v2: 'J', s1: 'hearts', s2: 'hearts', i1: '♥', i2: '♥' }, heroPos: 'BU', villanoPos: 'CO', pot: 63.5, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 0, correct: 'CHECK', msg: 'Villano hace Check. NUESTRA MANO YA ES SHOWDON TENEMOS QUE HACER CHECK.' },
            { board: [{ v: 'J', s: 'hearts', i: '♥' }, { v: '10', s: 'hearts', i: '♥' }, { v: '9', s: 'spades', i: '♠' }], hand: { v1: 'Q', v2: 'Q', s1: 'clubs', s2: 'diamonds', i1: '♣', i2: '♦' }, heroPos: 'CO', villanoPos: 'MP', pot: 24, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 0, correct: 'CHECK', msg: 'Board muy conectado y peligroso. Mejor dar Check por detrás para controlar el pozo con nuestra Overpair.' },
            { board: [{ v: '4', s: 'diamonds', i: '♦' }, { v: '4', s: 'clubs', i: '♣' }, { v: '2', s: 'spades', i: '♠' }, { v: '10', s: 'hearts', i: '♥' }, { v: 'K', s: 'spades', i: '♠' }], hand: { v1: '7', v2: '6', s1: 'diamonds', s2: 'diamonds', i1: '♦', i2: '♦' }, heroPos: 'BU', villanoPos: 'SB', pot: 52, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 0, correct: 'BET', msg: 'No tenemos nada pero el villano muestra debilidad extrema en River. Un Bet puede tirar sus manos medias.' },
            { board: [{ v: '4', s: 'hearts', i: '♥' }, { v: 'A', s: 'clubs', i: '♣' }, { v: '9', s: 'hearts', i: '♥' }, { v: '8', s: 'spades', i: '♠' }], hand: { v1: 'A', v2: '9', s1: 'spades', s2: 'spades', i1: '♠', i2: '♠' }, heroPos: 'BU', villanoPos: 'CO', pot: 52, heroStack: 100, villanoStack: 100, betHero: 'NONE', betVillano: 0, correct: 'BET', msg: 'BET 50-75% ESTA BIEN PERO SI NOS RAISEAN, HAY QUE FOLDEAR' },
            { board: [{v:'6',s:'clubs',i:'♣'},{v:'7',s:'diamonds',i:'♦'},{v:'J',s:'spades',i:'♠'},{v:'7',s:'hearts',i:'♥'},{v:'4',s:'clubs',i:'♣'}], hand: {v1:'Q',v2:'Q',s1:'spades',s2:'hearts',i1:'♠',i2:'♥'}, heroPos:'BU', villanoPos:'SB', pot:77, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:0, correct:'ALLIN', msg:' Tras el check del villano en el River, nuestro Overpair sigue siendo muy fuerte. Metemos el All-in para extraer el máximo valor de sus Jotas o dieces.' },
            { board: [{v:'6',s:'hearts',i:'♥'},{v:'2',s:'spades',i:'♠'},{v:'A',s:'hearts',i:'♥'},{v:'K',s:'spades',i:'♠'}], hand: {v1:'6',v2:'6',s1:'diamonds',s2:'clubs',i1:'♦',i2:'♣'}, heroPos:'BB', villanoPos:'SB', pot:78, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:0, correct:'ALLIN', msg:'¡CORRECTO! Tras el check del villano en el Turn y habiéndose completado el Rey, nuestro set de 6s es extremadamente fuerte. Vamos ALLIN para proteger contra proyectos de corazón y extraer el máximo valor de sus Ases.' },
            { board: [{v:'5',s:'hearts',i:'♥'},{v:'5',s:'diamonds',i:'♦'},{v:'10',s:'clubs',i:'♣'},{v:'7',s:'hearts',i:'♥'},{v:'8',s:'clubs',i:'♣'}], hand: {v1:'J',v2:'J',s1:'hearts',s2:'clubs',i1:'♥',i2:'♣'}, heroPos:'BB', villanoPos:'MP', pot:83.5, heroStack:100, villanoStack:100, betHero:'NONE', betVillano:'NONE', correct:'CHECK', msg:'¡Cuidado con ese River! Aunque tus Jotas eran fuertes al principio, el board ha conectado con muchos proyectos de escalera y el villano ha mostrado mucha fuerza pagando dos calles. Pasar es la opción más segura para llegar al showdown sin arriesgar más fichas contra manos como dieces o dobles parejas superiores.' }

        
        
        ];

        const posNames = ['UTG', 'MP', 'CO', 'BU', 'SB', 'BB'];
        let currentScenario = null;
        let actualHands = 0;
        let isFeedbackActive = false;
        let lastResult = false;
        let lastScenarioKey = ""; // Identificador para evitar repetir la misma mano consecutiva

        let recordHands = localStorage.getItem('poker_record_postflop') || 0;
        document.getElementById('record-val').innerText = recordHands;

        function updateStats(isCorrect) {
            if (isCorrect) {
                actualHands++;
                if (actualHands > recordHands) { recordHands = actualHands; localStorage.setItem('poker_record_postflop', recordHands); }
            } else { actualHands = 0; }
            document.getElementById('actual-val').innerText = actualHands;
            document.getElementById('record-val').innerText = recordHands;
        }

        function generate3BetScenario() {
            isFeedbackActive = false;
            document.getElementById('feedback-overlay').style.display = "none";

            document.querySelectorAll('.player-pod').forEach(p => p.classList.remove('active-player'));
            document.querySelectorAll('.card-back-group').forEach(cb => cb.innerHTML = '');
            document.querySelectorAll('.bet-chips').forEach(b => { b.style.display = 'none'; b.innerHTML = ''; });
            document.getElementById('dealer-btn').className = 'dealer-button';
            const actionContainer = document.getElementById('action-btns-container');

            // Probabilidad para elegir base de datos incluyendo la nueva
            const rand = Math.random();
            let db;
            let dbType = "";
            if (rand < 0.45) { db = ESCENARIOS_DATABASE; dbType = "orig"; }
            else if (rand < 0.65) { db = DATABASE_CHECK_BET; dbType = "check"; }
            else if (rand < 0.8) { db = DATABASE_VILLAIN_LEAD; dbType = "lead"; }
            else { db = DATABASE_VILLAIN_CHECK; dbType = "vcheck"; }

            // Bucle para evitar repetir la misma mano
            let randomIdx;
            let newKey = "";
            do {
                randomIdx = Math.floor(Math.random() * db.length);
                newKey = dbType + "_" + randomIdx;
            } while (newKey === lastScenarioKey && db.length > 1);

            lastScenarioKey = newKey;
            currentScenario = JSON.parse(JSON.stringify(db[randomIdx]));

            const hPosIdx = posNames.indexOf(currentScenario.heroPos);
            const vPosIdx = posNames.indexOf(currentScenario.villanoPos);
            const vSeatIdx = (vPosIdx - hPosIdx + 6) % 6;

            for (let i = 0; i < 6; i++) {
                const logicalIdx = (hPosIdx + i) % 6;
                const pod = document.getElementById(`pod-${i}`);
                const posLabel = posNames[logicalIdx];
                const stackLabel = document.getElementById(`st-${i}`);
                pod.querySelector('.name-plate').innerText = i === 0 ? `HERO (${posLabel})` : posLabel;
                stackLabel.style.color = "#22c55e";

                let baseStack = 100;
                if (posLabel === 'SB') baseStack = 99.5;
                if (posLabel === 'BB') baseStack = 99;

                if (i === 0) {
                    pod.classList.add('active-player');
                    const moneyInPot = currentScenario.pot / 2;
                    const currentHeroBet = (currentScenario.betHero === 'NONE' || currentScenario.betHero === 0) ? 0 : currentScenario.betHero;
                    const displayStack = currentScenario.heroStack - moneyInPot - currentHeroBet;
                    stackLabel.innerText = `${displayStack.toFixed(1)} BB`;
                } else if (i === vSeatIdx) {
                    pod.classList.add('active-player');
                    document.getElementById(`cb-${i}`).innerHTML = '<div class="card-back"></div><div class="card-back"></div>';
                    const moneyInPotV = currentScenario.pot / 2;
                    const vRem = currentScenario.villanoStack - moneyInPotV - currentScenario.betVillano;
                    stackLabel.innerText = `${vRem <= 0.1 ? 0 : vRem.toFixed(1)} BB`;
                    if (vRem <= 0.1) stackLabel.style.color = "#ef4444";
                } else {
                    pod.classList.remove('active-player');
                    stackLabel.innerText = `${baseStack} BB`;
                }
                if (logicalIdx === 3) document.getElementById('dealer-btn').classList.add(`d-pos-${i}`);
            }

            document.getElementById('pot-display').innerText = `POT: ${currentScenario.pot} BB`;
            const bDiv = document.getElementById('board'); bDiv.innerHTML = '';
            currentScenario.board.forEach(c => bDiv.innerHTML += `<div class="card ${c.s}"><span>${c.v}</span><span class="card-suit">${c.i}</span></div>`);
            document.getElementById('hero-cards').innerHTML = `<div class="card ${currentScenario.hand.s1}" style="transform:rotate(-5deg)"><span>${currentScenario.hand.v1}</span><span class="card-suit">${currentScenario.hand.i1}</span></div><div class="card ${currentScenario.hand.s2}" style="transform:rotate(5deg)"><span>${currentScenario.hand.v2}</span><span class="card-suit">${currentScenario.hand.i2}</span></div>`;

            const hBet = document.getElementById('bet-0');
            const vBet = document.getElementById(`bet-${vSeatIdx}`);

            // HERO BET VISUALS
            if (currentScenario.betHero === 'NONE') {
                hBet.style.display = 'none';
            } else if (currentScenario.betHero === 0) {
                hBet.innerHTML = `<div class="action-tag" style="background:#444">CHECK</div><div class="chip-amount">0 BB</div>`;
                hBet.style.display = 'flex';
            } else {
                hBet.innerHTML = `<div class="action-tag" style="background:#1e40af">BET</div><div class="chip-amount">${currentScenario.betHero} BB</div>`;
                hBet.style.display = 'flex';
            }

            // VILLAIN BET VISUALS
            if (currentScenario.betVillano === 0) {
                vBet.innerHTML = `<div class="action-tag" style="background:#444">CHECK</div><div class="chip-amount">0 BB</div>`;
                vBet.style.display = 'flex';
            } else {
                const moneyInPotVCheck = currentScenario.pot / 2;
                const isVAllIn = currentScenario.betVillano >= (currentScenario.villanoStack - moneyInPotVCheck - 0.5);
                let vTag = isVAllIn ? 'ALL IN' : 'RAISE';
                if (currentScenario.betHero === 0 || currentScenario.betHero === 'NONE') vTag = isVAllIn ? 'ALL IN' : 'BET';
                vBet.innerHTML = `<div class="action-tag" style="background:#b91c1c">${vTag}</div><div class="chip-amount">${currentScenario.betVillano} BB</div>`;
                vBet.style.display = 'flex';
            }

            // BUTTONS LOGIC
            if (dbType === "vcheck") {
                // Especial para DATABASE_VILLAIN_CHECK: CHECK, BET, ALL IN
                actionContainer.style.gridTemplateColumns = "1fr 1fr 1fr";
                actionContainer.innerHTML = `
                <button class="btn-p btn-f" style="background:#444; border-bottom: 4px solid #222;" onclick="checkAction('CHECK')">CHECK</button>
                <button class="btn-p btn-c" onclick="checkAction('BET')">BET</button>
                <button class="btn-p btn-a" onclick="checkAction('ALLIN')">ALL IN</button>`;
            } else {
                // Lógica normal para los otros escenarios
                const isVAllIn = vBet.innerText.includes('ALL IN');
                if (isVAllIn) {
                    actionContainer.style.gridTemplateColumns = "1fr 1fr";
                    actionContainer.innerHTML = `<button class="btn-p btn-f" onclick="checkAction('FOLD')">FOLD</button><button class="btn-p btn-a" onclick="checkAction('ALLIN')">CALL ALL-IN</button>`;
                } else {
                    const actionText = (dbType === "check" || dbType === "lead") ? "RAISE" : "ALL IN";
                    const actionCode = (dbType === "check" || dbType === "lead") ? "RAISE" : "ALLIN";
                    actionContainer.style.gridTemplateColumns = "1fr 1fr 1fr";
                    actionContainer.innerHTML = `<button class="btn-p btn-f" onclick="checkAction('FOLD')">FOLD</button><button class="btn-p btn-c" onclick="checkAction('CALL')">CALL</button><button class="btn-p btn-a" onclick="checkAction('${actionCode}')">${actionText}</button>`;
                }
            }
        }

        function checkAction(action) {
            if (isFeedbackActive) return;

            const overlay = document.getElementById('feedback-overlay');
            const isCorrect = action === currentScenario.correct || (action === 'RAISE' && currentScenario.correct === 'ALLIN') || (action === 'ALLIN' && currentScenario.correct === 'RAISE');

            lastResult = isCorrect;
            updateStats(isCorrect);

            overlay.innerHTML = (isCorrect ? `CORRECTO` : `ERROR`) + `<br><span style="font-size:12px; font-weight:400">${currentScenario.msg}</span><br><span style="font-size:10px; font-weight:700; opacity:0.8; margin-top:10px; display:block;">TOCA EN CUALQUIER LADO PARA CONTINUAR</span>`;
            overlay.style.backgroundColor = isCorrect ? "#16a34a" : "#dc2626";
            overlay.style.display = "block";

            setTimeout(() => { isFeedbackActive = true; }, 100);
        }

        function closeFeedback() {
            if (!isFeedbackActive) return;

            const overlay = document.getElementById('feedback-overlay');
            overlay.style.display = "none";
            isFeedbackActive = false;

            if (lastResult) {
                generate3BetScenario();
            }
        }

        window.onload = generate3BetScenario;
    </script>
</body>

</html>



